{"version":3,"file":"HomeView-DqdEPIxU.js","sources":["../../src/components/scroller/TheScroller.vue","../../src/components/scroller/TheScrollerPagination.vue","../../src/views/HomeView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onMounted, ref } from 'vue';\n\nimport { TheScrollerPagination } from '@/components';\n\n// -----------------------------------------------------------------------------\n// Setup\n// -----------------------------------------------------------------------------\n\nconst { timeout } = defineProps<{ timeout: number }>();\n\n// -----------------------------------------------------------------------------\n// State\n// -----------------------------------------------------------------------------\n\nconst currentPage = ref(1);\nconst totalPages = ref(120);\nconst runnerWidth = ref(0);\nconst startTime = ref(0);\nconst rafId = ref();\nconst interval = ref<NodeJS.Timeout | undefined>(undefined);\n\n// -----------------------------------------------------------------------------\n// Actions\n// -----------------------------------------------------------------------------\n\nconst pgForward = () => {\n  if (currentPage.value) {\n    startSlides();\n    if (currentPage.value === totalPages.value) {\n      currentPage.value = 1;\n    } else {\n      currentPage.value = currentPage.value + 1;\n    }\n  }\n};\n\nconst pgBack = () => {\n  if (currentPage.value) {\n    startSlides();\n    if (currentPage.value === 1) {\n      currentPage.value = totalPages.value;\n    } else {\n      currentPage.value = currentPage.value - 1;\n    }\n  }\n};\n\nconst updateProgress = () => {\n  const elapsed = Date.now() - startTime.value;\n  runnerWidth.value = Math.min(elapsed / timeout, 1);\n\n  if (runnerWidth.value >= 1) {\n    pgForward();\n  } else {\n    rafId.value = requestAnimationFrame(updateProgress);\n  }\n};\n\nconst startSlides = () => {\n  if (interval.value) {\n    clearInterval(interval.value);\n  }\n\n  runnerWidth.value = 0;\n  startTime.value = Date.now();\n  rafId.value = requestAnimationFrame(updateProgress);\n\n  interval.value = setInterval(() => {\n    pgForward();\n  }, timeout);\n};\n\nonMounted(() => {\n  startSlides();\n});\n</script>\n\n<template>\n  <div class=\"scroller-wrapper\">\n    <h2 class=\"title\">Соберите шведскую стенку по своему желанию!</h2>\n\n    <p class=\"text\">\n      ({{ currentPage }}) Проснувшись однажды утром после беспокойного сна, Грегор Замза обнаружил, что он у себя в\n      постели превратился в страшное насекомое.\n    </p>\n\n    <RouterLink :to=\"{ name: 'constructor.view' }\">\n      <div\n        type=\"button\"\n        class=\"btn\"\n      >\n        Перейти в конструктор\n      </div>\n    </RouterLink>\n\n    <TheScrollerPagination\n      v-model:page=\"currentPage\"\n      :pages=\"totalPages\"\n      class=\"pagination\"\n      :pg-forward=\"pgForward\"\n      :pg-back=\"pgBack\"\n    />\n    <div class=\"progress-bar\">\n      <div\n        class=\"progress-bar__runner\"\n        :style=\"{ width: `${runnerWidth * 100}%` }\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.scroller-wrapper {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n  align-items: start;\n\n  padding: 58px 50px;\n  row-gap: 20px;\n\n  background: $color-white url('@/assets/scroller/bg.png') 100% center no-repeat;\n  background-size: contain;\n}\n\n.progress-bar {\n  height: 4px;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: $color-scroller;\n\n  &__runner {\n    display: flex;\n    background-color: $color-scroller-runner;\n    height: 4px;\n  }\n}\n\n.title {\n  display: flex;\n  font-size: 40px;\n  font-weight: 900;\n  width: 500px;\n  background: linear-gradient(to right, #0a4ecb, #4788ff);\n  background-clip: text;\n  color: transparent;\n}\n\n.text {\n  display: flex;\n  font-size: 14px;\n  width: 400px;\n}\n\n.img {\n  display: flex;\n  max-height: 400px;\n  width: auto;\n}\n\n.btn {\n  display: flex;\n  height: 58px;\n  width: 262px;\n  border-radius: 12px;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(to right, #f04716, #ffc62f);\n  color: white;\n  font-size: 15px;\n  font-weight: 600;\n}\n\n.pagination {\n  display: flex;\n  position: absolute;\n\n  bottom: 20px;\n  right: 20px;\n}\n</style>\n","<script setup lang=\"ts\">\n// -----------------------------------------------------------------------------\n// Setup\n// -----------------------------------------------------------------------------\nconst { page, pages, pgBack, pgForward } = defineProps<{\n  page: number;\n  pages: number;\n  pgBack: () => void;\n  pgForward: () => void;\n}>();\n\n// -----------------------------------------------------------------------------\n// State\n// -----------------------------------------------------------------------------\n\n// -----------------------------------------------------------------------------\n// Actions\n// -----------------------------------------------------------------------------\n</script>\n\n<template>\n  <div class=\"scroller-pagination-wrapper\">\n    <button\n      type=\"button\"\n      class=\"btn btn--back\"\n      @click=\"pgBack\"\n    />\n    <p class=\"pages\">{{ page }} / {{ pages }}</p>\n    <button\n      type=\"button\"\n      class=\"btn btn--fwd\"\n      @click=\"pgForward\"\n    />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.scroller-pagination-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 15px;\n  font-weight: 700;\n}\n\n.pages {\n  display: flex;\n  margin: 0 20px;\n  width: 70px;\n  justify-content: center;\n  align-items: center;\n}\n\n.btn {\n  height: 38px;\n  width: 38px;\n  border-radius: 50%;\n  position: relative;\n  background-color: $color-gray-80-t40;\n\n  &--back:before {\n    content: '';\n    position: absolute;\n    top: 13px;\n    left: 15px;\n    width: 12px;\n    height: 12px;\n    border-bottom: 2px solid $color-white;\n    border-right: 2px solid $color-white;\n    transform: rotate(135deg);\n  }\n\n  &--fwd:before {\n    content: '';\n    position: absolute;\n    top: 13px;\n    left: 11px;\n    width: 12px;\n    height: 12px;\n    border-bottom: 2px solid $color-white;\n    border-right: 2px solid $color-white;\n    transform: rotate(-45deg);\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { TheScroller } from '@/components';\n</script>\n\n<template>\n  <TheScroller\n    class=\"scroller\"\n    :timeout=\"10000\"\n  />\n</template>\n\n<style scoped lang=\"scss\">\n.scroller {\n  width: 780px;\n  border-radius: 12px;\n}\n</style>\n"],"names":["currentPage","ref","totalPages","runnerWidth","startTime","rafId","interval","pgForward","startSlides","pgBack","updateProgress","elapsed","__props","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_toDisplayString","_createVNode","_component_RouterLink","_unref","TheScrollerPagination","$event","_hoisted_3","args","_createBlock","TheScroller"],"mappings":"iQAeA,MAAMA,EAAcC,EAAI,CAAC,EACnBC,EAAaD,EAAI,GAAG,EACpBE,EAAcF,EAAI,CAAC,EACnBG,EAAYH,EAAI,CAAC,EACjBI,EAAQJ,EAAA,EACRK,EAAWL,EAAgC,MAAS,EAMpDM,EAAY,IAAM,CAClBP,EAAY,QACdQ,EAAA,EACIR,EAAY,QAAUE,EAAW,MACnCF,EAAY,MAAQ,EAEpBA,EAAY,MAAQA,EAAY,MAAQ,EAG9C,EAEMS,EAAS,IAAM,CACfT,EAAY,QACdQ,EAAA,EACIR,EAAY,QAAU,EACxBA,EAAY,MAAQE,EAAW,MAE/BF,EAAY,MAAQA,EAAY,MAAQ,EAG9C,EAEMU,EAAiB,IAAM,CAC3B,MAAMC,EAAU,KAAK,IAAA,EAAQP,EAAU,MACvCD,EAAY,MAAQ,KAAK,IAAIQ,EAAUC,UAAS,CAAC,EAE7CT,EAAY,OAAS,EACvBI,EAAA,EAEAF,EAAM,MAAQ,sBAAsBK,CAAc,CAEtD,EAEMF,EAAc,IAAM,CACpBF,EAAS,OACX,cAAcA,EAAS,KAAK,EAG9BH,EAAY,MAAQ,EACpBC,EAAU,MAAQ,KAAK,IAAA,EACvBC,EAAM,MAAQ,sBAAsBK,CAAc,EAElDJ,EAAS,MAAQ,YAAY,IAAM,CACjCC,EAAA,CACF,EAAGK,SAAO,CACZ,EAEA,OAAAC,EAAU,IAAM,CACdL,EAAA,CACF,CAAC,kCAIC,OAAAM,EAAA,EAAAC,EA8BM,MA9BNC,EA8BM,CA7BJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAkE,KAAA,CAA9D,MAAM,OAAA,EAAQ,8CAA2C,EAAA,GAE7DA,EAGI,IAHJC,EAAgB,KACbC,EAAGpB,EAAA,KAAW,EAAG,yIAEpB,CAAA,EAEAqB,EAOaC,EAAA,CAPA,GAAI,CAAA,KAAA,kBAAA,GAA4B,WAC3C,IAKM,CAAA,GAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CALNC,EAKM,MAAA,CAJJ,KAAK,SACL,MAAM,KAAA,EACP,0BAED,EAAA,CAAA,WAGFG,EAMEE,EAAAC,CAAA,EAAA,CALQ,KAAMxB,EAAA,qCAAAA,EAAW,MAAAyB,GACxB,MAAOvB,EAAA,MACR,MAAM,aACL,aAAYK,EACZ,UAASE,CAAA,2BAEZS,EAKM,MALNQ,EAKM,CAJJR,EAGO,MAAA,CAFL,MAAM,uBACL,kBAAmBf,EAAA,MAAW,GAAA,GAAA,CAAA,CAAA,0PCrFrCW,EAAA,EAAAC,EAYM,MAZNC,EAYM,CAXJE,EAIE,SAAA,CAHA,KAAK,SACL,MAAM,gBACL,QAAKD,EAAA,CAAA,IAAAA,EAAA,CAAA,UAAEL,EAAA,QAAAA,EAAA,OAAA,GAAAe,CAAA,EAAA,GAEVT,EAA6C,IAA7CC,EAA6CC,EAAzBR,MAAI,EAAG,QAAMA,EAAA,KAAK,EAAA,CAAA,EACtCM,EAIE,SAAA,CAHA,KAAK,SACL,MAAM,eACL,QAAKD,EAAA,CAAA,IAAAA,EAAA,CAAA,UAAEL,EAAA,WAAAA,EAAA,UAAA,GAAAe,CAAA,EAAA,oGC1BZC,EAGEL,EAAAM,CAAA,EAAA,CAFA,MAAM,WACL,QAAS,GAAA"}